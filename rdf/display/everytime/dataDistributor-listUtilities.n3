@prefix : <http://vitro.mannlib.cornell.edu/ns/vitro/ApplicationSetup#> .
@prefix rdfs: <http://www.w3.org/2000/01/rdf-schema#> .
@prefix xsd: <http://www.w3.org/2001/XMLSchema#> .

#
# Some data requests that might be of general use.
#

:department_list_distributor
    a   <java:edu.cornell.library.scholars.webapp.controller.api.distribute.DataDistributor> ,
        <java:edu.cornell.library.scholars.webapp.controller.api.distribute.rdf.SelectFromContentDistributor> ;
    :actionName "departmentList" ;
    :query """
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        PREFIX vivo: <http://vivoweb.org/ontology/core#>
        SELECT ?uri ?label
        WHERE {{
          ?uri a vivo:AcademicDepartment ;
          		rdfs:label ?label .
        } UNION
		{
		  ?uri a vivo:Institute ;
          		rdfs:label ?label .
		}}
        ORDER BY ?label
    """ .

:faculty_list_distributor
    a   <java:edu.cornell.library.scholars.webapp.controller.api.distribute.DataDistributor> ,
        <java:edu.cornell.library.scholars.webapp.controller.api.distribute.rdf.SelectFromContentDistributor> ;
    :actionName "facultyList" ;
    :query """
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        PREFIX vivo: <http://vivoweb.org/ontology/core#>
        SELECT ?uri ?label
        WHERE {
          ?uri a vivo:FacultyMember ;
               rdfs:label ?label .
        }
        ORDER BY ?label
    """ .

:ordered_journal_list_distributor
    a   <java:edu.cornell.library.scholars.webapp.controller.api.distribute.DataDistributor> ,
        <java:edu.cornell.library.scholars.webapp.controller.api.distribute.rdf.SelectFromContentDistributor> ;
    :actionName "orderedJournalList" ;
    :query """
        PREFIX bibo: <http://purl.org/ontology/bibo/>
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        PREFIX vivo: <http://vivoweb.org/ontology/core#>

        SELECT 
          ?uri 
          (SAMPLE(?title) AS ?label) 
          (COUNT(DISTINCT(?article)) AS ?count)
        WHERE {
          ?uri 
              a bibo:Journal ;
              rdfs:label ?title .
          ?article 
              a bibo:Document ; 
              vivo:hasPublicationVenue ?uri .
        }
        GROUP BY ?uri
        ORDER BY DESC(?count)
    """ .

:ordered_proceedings_list_distributor
    a   <java:edu.cornell.library.scholars.webapp.controller.api.distribute.DataDistributor> ,
        <java:edu.cornell.library.scholars.webapp.controller.api.distribute.rdf.SelectFromContentDistributor> ;
    :actionName "orderedProceedingsList" ;
    :query """
        PREFIX bibo: <http://purl.org/ontology/bibo/>
        PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
        PREFIX vivo: <http://vivoweb.org/ontology/core#>

        SELECT 
          ?uri 
          (SAMPLE(?title) AS ?label) 
          (COUNT(DISTINCT(?article)) AS ?count)
        WHERE {
          ?uri 
              a bibo:Proceedings ;
              rdfs:label ?title .
          ?article 
              a bibo:Document ; 
              vivo:hasPublicationVenue ?uri .
        }
        GROUP BY ?uri
        ORDER BY DESC(?count)
    """ .


