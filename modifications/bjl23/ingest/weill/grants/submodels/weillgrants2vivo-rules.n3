@prefix swrl:    <http://www.w3.org/2003/11/swrl#> .
@prefix ruleml:  <http://www.w3.org/2003/11/swrl#> .
@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix owl:     <http://www.w3.org/2002/07/owl#> .
@prefix eg:      <http://example.org/example-ont#> .
@prefix vitro:   <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#> .
@prefix vivo:    <http://vivo.library.cornell.edu/ns/0.1#> .
@prefix mann:    <http://vivo.cornell.edu/ns/mannadditions/0.1#> .
@prefix hr:      <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#> .
@prefix xtor:    <http://ingest.mannlib.cornell.edu/generalizedXMLtoRDF/0.1/> .
@prefix rules: <http://vitro.mannlib.cornell.edu/ns/reporting/weillgrants2vivo-rules#> .
@prefix swrlb: <http://www.w3.org/2003/11/swrlb#> .

# rule 1 : create investigator relationships

rules:grant-1      a       swrl:Variable .
rules:investigatorsNode-1        a       swrl:Variable .
rules:contextNode-1           a		swrl:Variable .
rules:investigator-1        a       swrl:Variable .
   
rules:rule-1    a       swrl:Imp ;
      swrl:body (
                 [ a       swrl:IndividualPropertyAtom ;
                  swrl:propertyPredicate xtor:AWARD_INVESTIGATORS_ROW ;
                  swrl:argument1 rules:grant-1 ;
                  swrl:argument2 rules:contextNode-1 ;
                 ]
		 [ a 	swrl:DatavaluedPropertyAtom ;
		   swrl:propertyPredicate xtor:PRINCIPAL_INVESTIGATOR ;
		   swrl:argument1 rules:contextNode-1 ;
		   swrl:argument2 "YES" ;
		 ]
		 [
		   a    swrl:IndividualPropertyAtom ;
		   swrl:propertyPredicate xtor:AWARD_INVESTIGATORS_ROW ;
	           swrl:argument1 rules:contextNode-1 ;
	           swrl:argument2 rules:investigator-1 ;
		 ]
                 ) ;
      swrl:head (
                [ a       swrl:IndividualPropertyAtom ;
                  swrl:propertyPredicate vivo:FinancialAwardHasPrimaryInvestigatorPerson ;
                  swrl:argument1 rules:grant-1 ;
                  swrl:argument2 rules:investigator-1 ;
                ]
                ) .


rules:grant-1-1      a       swrl:Variable .
rules:investigatorsNode-1-1        a       swrl:Variable .
rules:contextNode-1-1           a		swrl:Variable .
rules:investigator-1-1        a       swrl:Variable .
   
rules:rule-1-1    a       swrl:Imp ;
      swrl:body (
                 [ a       swrl:IndividualPropertyAtom ;
                  swrl:propertyPredicate xtor:AWARD_INVESTIGATORS_ROW ;
                  swrl:argument1 rules:grant-1-1 ;
                  swrl:argument2 rules:contextNode-1-1 ;
                 ]
		 [ a 	swrl:DatavaluedPropertyAtom ;
		   swrl:propertyPredicate xtor:PRINCIPAL_INVESTIGATOR ;
		   swrl:argument1 rules:contextNode-1-1 ;
		   swrl:argument2 "NO" ;
		 ]
		 [
		   a    swrl:IndividualPropertyAtom ;
		   swrl:propertyPredicate xtor:AWARD_INVESTIGATORS_ROW ;
	           swrl:argument1 rules:contextNode-1-1 ;
	           swrl:argument2 rules:investigator-1-1 ;
		 ]
                 ) ;
      swrl:head (
                [ a       swrl:IndividualPropertyAtom ;
                  swrl:propertyPredicate vivo:FinancialAwardIsCoInvestigatedByPerson ;
                  swrl:argument1 rules:grant-1-1 ;
                  swrl:argument2 rules:investigator-1-1 ;
                ]
                ) .



rules:person1   a       swrl:Variable .
rules:person2   a       swrl:Variable .
rules:cwid      a       swrl:Variable .

rules:rule-2    a       swrl:Imp ;
    swrl:body   (
                    [ a swrl:DatavaluedPropertyAtom ;
                      swrl:propertyPredicate <http://vitro.mannlib.cornell.edu/ns/wcmc/people/person_CWID> ;
                      swrl:argument1 rules:person1 ;
                      swrl:argument2 rules:cwid ;  
                    ]
                    [ a swrl:DatavaluedPropertyAtom ;
                      swrl:propertyPredicate <http://vitro.mannlib.cornell.edu/ns/wcmc/people/person_CWID> ;
                      swrl:argument1 rules:person2 ;
                      swrl:argument2 rules:cwid ;
                    ]
                ) ;
    swrl:head   (
                    [
                      a swrl:SameIndividualAtom ;
                      swrl:argument1 rules:person1 ;
                      swrl:argument2 rules:person2 ;
                    ]
                ) .


rules:agency1-3   a       swrl:Variable .
rules:agency2-3   a       swrl:Variable .
rules:code-3      a       swrl:Variable .

rules:rule-3    a       swrl:Imp ;
    swrl:body   (
                    [ a swrl:DatavaluedPropertyAtom ;
                      swrl:propertyPredicate vivo:weillFundingAgencyCode ;
                      swrl:argument1 rules:agency1-3 ;
                      swrl:argument2 rules:code-3 ;  
                    ]
                    [ a swrl:DatavaluedPropertyAtom ;
                      swrl:propertyPredicate vivo:weillFundingAgencyCode ;
                      swrl:argument1 rules:agency2-3 ;
                      swrl:argument2 rules:code-3 ;
                    ]
                ) ;
    swrl:head   (
                    [
                      a swrl:SameIndividualAtom ;
                      swrl:argument1 rules:agency1-3 ;
                      swrl:argument2 rules:agency2-3 ;
                    ]
                ) .


rules:grant1-4   a       swrl:Variable .
rules:grant2-4   a       swrl:Variable .
rules:code-4      a       swrl:Variable .

rules:rule-4    a       swrl:Imp ;
    swrl:body   (
                    [ a swrl:DatavaluedPropertyAtom ;
                      swrl:propertyPredicate <http://ingest.mannlib.cornell.edu/generalizedXMLtoRDF/0.1/RASP_AWARD_ID> ;
                      swrl:argument1 rules:grant1-4 ;
                      swrl:argument2 rules:code-4 ;  
                    ]
                    [ a swrl:DatavaluedPropertyAtom ;
                      swrl:propertyPredicate <http://ingest.mannlib.cornell.edu/generalizedXMLtoRDF/0.1/RASP_AWARD_ID> ;
                      swrl:argument1 rules:grant2-4 ;
                      swrl:argument2 rules:code-4 ;
                    ]
                ) ;
    swrl:head   (
                    [
                      a swrl:SameIndividualAtom ;
                      swrl:argument1 rules:grant1-4 ;
                      swrl:argument2 rules:grant2-4 ;
                    ]
                ) .


