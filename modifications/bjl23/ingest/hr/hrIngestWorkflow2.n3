@prefix rdfs:    <http://www.w3.org/2000/01/rdf-schema#> .
@prefix rdf:     <http://www.w3.org/1999/02/22-rdf-syntax-ns#> .
@prefix w:		 <http://vitro.mannlib.cornell.edu/ns/vitro/rdfIngestWorkflow#> .
@prefix hrw:     <http://vitro.mannlib.cornell.edu/ns/ingest/HRIngestWorkflow#> .
@prefix s:	     <http://vitro.mannlib.cornell.edu/ns/vitro/0.7/sparql#> .
@prefix vitro:   <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#> .

hrw:sameAsConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		   PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		   PREFIX owl: <http://www.w3.org/2002/07/owl#>
		   PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>
		   PREFIX hrw: <http://vitro.mannlib.cornell.edu/ns/ingest/HRIngestWorkflow#>
		   CONSTRUCT {
    		   	     ?p hrw:sameAs ?q
		    } WHERE {
				  {
					?p chr:emplId ?id .
       			  	?q chr:emplId ?id
				  } UNION {
					?p vivo:CornellemailnetId ?emailNetid .
					?q vivo:CornellemailnetId ?emailNetid
				  }
                  OPTIONAL {
                      ?p ?typep <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#Person>
                  } 
                  OPTIONAL {
                      ?q ?typeq <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#Person>
                  }
				  FILTER(bound(?typep))
				  FILTER(!bound(?typeq))
       		    }
	" .

hrw:NewPeopleAssertionsConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		   PREFIX owl: <http://www.w3.org/2002/07/owl#>
		   PREFIX hr: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#>
		   PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		   PREFIX hrb: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#>
		   PREFIX hrw: <http://vitro.mannlib.cornell.edu/ns/ingest/HRIngestWorkflow#>
		   CONSTRUCT {
		   	     ?s ?p ?o .
			     ?oo ?pp ?s
		   } WHERE {
		     	 ?s rdf:type hrb:Person .
			     ?s ?p ?o .
                             OPTIONAL {
			     ?oo ?pp ?s .
                             }
			     OPTIONAL {
			     	      ?s hrw:sameAs ?existingPerson
			     }
			     FILTER (!bound(?existingPerson))
			     FILTER (!regex(str(?p),\"http://www.w3.org/2002/07/owl#\"))
			     FILTER (!regex(str(?p),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#\"))
			     FILTER (!regex(str(?pp),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#\"))
			     FILTER (!regex(str(?p),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#\"))
			     FILTER (!regex(str(?pp),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#\"))
			     FILTER (!regex(str(?o),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#\"))
		   }
	" .

hrw:ExistingPeoplePreAssertionsConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		   PREFIX owl: <http://www.w3.org/2002/07/owl#>
		   PREFIX hr: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#>
		   PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		   PREFIX hrb: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#>
		   PREFIX hrw: <http://vitro.mannlib.cornell.edu/ns/ingest/HRIngestWorkflow#>
		   CONSTRUCT {
		   	     ?existingPerson ?p ?o .
			     ?oo ?pp ?existingPerson
		   } WHERE {
		     	 ?s rdf:type hrb:Person .
		     	 ?s hrw:sameAs ?existingPerson .
		     	 OPTIONAL {
		     	    ?existingPerson ?rdftype vivo:HiddenCornellEmployee
		     	 } 
		     	 FILTER (!bound(?rdftype))
			     ?s ?p ?o .
                 OPTIONAL {
			         ?oo ?pp ?s .
			         FILTER (!regex(str(?pp),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#\"))
			         FILTER (!regex(str(?pp),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#\"))
                 }
			     FILTER (!regex(str(?p),\"http://www.w3.org/2002/07/owl#\"))
			     FILTER (!regex(str(?p),\"rdf-schema\"))
				 FILTER (!regex(str(?p),\"sameAs\"))
			     FILTER (!regex(str(?p),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#\"))
			     FILTER (!regex(str(?p),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#\"))
			     FILTER (!regex(str(?o),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#\"))
			     FILTER (!regex(str(?o),\"http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#\"))
		   }
	" .

hrw:ExistingPeoplePreRetractionsConstruct1Query
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		   PREFIX owl: <http://www.w3.org/2002/07/owl#>
		   PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>
		   PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		   PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		   PREFIX hrw: <http://vitro.mannlib.cornell.edu/ns/ingest/HRIngestWorkflow#>
		   CONSTRUCT {
		   	     ?existingPerson ?p ?o .
			     ?existingPerson vitro:moniker ?moniker .
				 ?existingPerson vivo:CornellemailnetId ?emailNetid .
				 #?existingPerson rdfs:label ?label
		   } WHERE {
		     	   ?s hrw:sameAs ?existingPerson .
			   OPTIONAL {
			   	    ?existingPerson vitro:moniker ?moniker
			   } OPTIONAL {
					?existingPerson vivo:CornellemailnetId ?emailNetid 
			   } OPTIONAL {
					?existingPerson rdfs:label ?label
			   }
			   OPTIONAL {
			   	    ?existingPerson ?p ?o
			   	    FILTER (regex(str(?p),\"http://vivo.cornell.edu/ns/hr/0.9/hr.owl#\"))
			   }
		   }
	" .

hrw:ExistingPeoplePreRetractionsConstruct2Query
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		   PREFIX owl: <http://www.w3.org/2002/07/owl#>
		   PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		   PREFIX hrw: <http://vitro.mannlib.cornell.edu/ns/ingest/HRIngestWorkflow#>
		   CONSTRUCT {
		   	     ?existingPerson rdf:type ?type
		   } WHERE {
		     	   ?s hrw:sameAs ?existingPerson .
			   { ?existingPerson rdf:type ?type
                             FILTER (regex(str(?type),\"http://vivo.cornell.edu/ns/mannadditions/0.1#CornellFaculty\"))
                           } UNION {
			     ?existingPerson rdf:type ?type
                             FILTER (regex(str(?type),\"http://vivo.cornell.edu/ns/mannadditions/0.1#CornellLibrarian\"))
			   } UNION {
			     ?existingPerson rdf:type ?type
			     FILTER (regex(str(?type),\"http://vivo.cornell.edu/ns/mannadditions/0.1#CornellNonAcademicStaff\"))
			   } UNION {
			     ?existingPerson rdf:type ?type
			     FILTER (regex(str(?type),\"http://vivo.library.cornell.edu/ns/0.1#CornellAcademicStaff\"))
			   } UNION {
			     ?existingPerson rdf:type ?collegeFlag
			     FILTER (regex(str(?collegeFlag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag2Value\"))
			   }
		   }
	" .

hrw:ExistingPeoplePreRetractionsConstruct3Query
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		   PREFIX owl: <http://www.w3.org/2002/07/owl#>
		   PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		   PREFIX hrw: <http://vitro.mannlib.cornell.edu/ns/ingest/HRIngestWorkflow#>
		   CONSTRUCT {
		   	     ?existingPerson ?p ?o .
			     ?oo ?pp ?existingPerson
		   } WHERE {
		     	     ?s hrw:sameAs ?existingPerson
			     { 
			       ?existingPerson ?p ?o .
			       ?oo ?pp ?existingPerson 
			       FILTER (regex(str(?p),\"http://vivo.library.cornell.edu/ns/0.1#employeeOfAsAcademicFacultyMember\"))
			       FILTER (regex(str(?pp),\"http://vivo.library.cornell.edu/ns/0.1#hasEmployeeAcademicFacultyMember\"))
			     } UNION {
			       ?existingPerson ?p ?o .
			       ?oo ?pp ?existingPerson 
			       FILTER (regex(str(?p),\"http://vivo.library.cornell.edu/ns/0.1#employeeOfAsAdminFacultyMember\"))
			       FILTER (regex(str(?pp),\"http://vivo.library.cornell.edu/ns/0.1#hasEmployeeAdminFacultyMember\"))
			     } UNION {
			       ?existingPerson ?p ?o .
			       ?oo ?pp ?existingPerson 
			       FILTER (regex(str(?p),\"http://vivo.library.cornell.edu/ns/0.1#employeeOfAsAcademicStaffMember\"))
			       FILTER (regex(str(?pp),\"http://vivo.library.cornell.edu/ns/0.1#hasEmployeeAcademicStaffMember\"))
			     } UNION {
			       ?existingPerson ?p ?o .
			       ?oo ?pp ?existingPerson 
			       FILTER (regex(str(?p),\"http://vivo.cornell.edu/ns/mannadditions/0.1#employeeOfAsLibrarian\"))
			       FILTER (regex(str(?pp),\"http://vivo.cornell.edu/ns/mannadditions/0.1#hasEmployeeLibrarian\"))
			     } UNION {
			       ?existingPerson ?p ?o .
			       ?oo ?pp ?existingPerson 
			       FILTER (regex(str(?p),\"http://vivo.library.cornell.edu/ns/0.1#employeeOfAsNonAcademicStaffMember\"))
			       FILTER (regex(str(?pp),\"http://vivo.library.cornell.edu/ns/0.1#hasEmployeeNonAcademicStaffMember\"))
			     }
		   }
	" .

hrw:CornellemailnetIdConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX hr: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#>
        PREFIX hrb: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX fn: <http://www.w3.org/2005/xpath-functions#>
		CONSTRUCT  { ?ap vivo:CornellemailnetId ?netid }
		WHERE { 
		    ?person hr:person_Netid ?rawNetid .
		    LET (?netid := fn:lower-case(?rawNetid))
			?ap hrb:hasPerson ?person
		 }
    " .

hrw:facultyMemberInConstructQuery
    a s:SPARQLCONSTRUCTQuery ;
    s:queryStr "
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>
		PREFIX hr: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#>
		PREFIX hrb: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#>

		CONSTRUCT  { 
			?p vivo:employeeOfAsAcademicFacultyMember ?dept .
			?dept vivo:hasEmployeeAcademicFacultyMember ?p. }
		WHERE { 
		{
			?j hr:job_JobFamilyLdesc \"Professorial\" .
        	?p hrb:hasJob ?j .
			?j hr:job_Deptid ?code .
			?dept vivo:departmentHRcode ?code 
		} UNION {
			?j hr:job_JobFamilyLdesc \"Professorial\" .
        	?p hrb:hasJob ?j .
			?j hr:job_Deptid ?code .		
			?dept vivo:activityHRcode ?code 
		} UNION {
            ?j hr:job_Jobcode \"11100\" . # Professor Assistant Courtesy
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code 		  
		} UNION {
            ?j hr:job_Jobcode \"11100\" . # Professor Assistant Courtesy
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        } UNION {
            ?j hr:job_Jobcode \"11099\" . # Professor Associate Courtesy
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code         
        } UNION {
            ?j hr:job_Jobcode \"11099\" . # Professor Associate Courtesy
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        } UNION {
            ?j hr:job_Jobcode \"10737\" . # Prof Courtesy
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code         
        } UNION {
            ?j hr:job_Jobcode \"10737\" . # Prof Courtesy
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        } UNION {
            ?j hr:job_Jobcode \"10732\" . # Prof Adj Asst
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code         
        } UNION {
            ?j hr:job_Jobcode \"10732\" . # Prof Adj Asst
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        } UNION {
            ?j hr:job_Jobcode \"10731\" . # Prof Adj Assoc
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code         
        } UNION {
            ?j hr:job_Jobcode \"10731\" . # Prof Adj Assoc
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        } UNION {
            ?j hr:job_Jobcode \"10730\" . # Prof Adj
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code         
        } UNION {
            ?j hr:job_Jobcode \"10730\" . # Prof Adj
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        } UNION {
            ?j hr:job_Jobcode \"10741\" . # Prof Visiting
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code         
        } UNION {
            ?j hr:job_Jobcode \"10741\" . # Prof Visiting
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        } UNION {
            ?j hr:job_Jobcode \"10736\" . # Prof Asst Visit
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code         
        } UNION {
            ?j hr:job_Jobcode \"10736\" . # Prof Asst Visit
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        } UNION {
            ?j hr:job_Jobcode \"10734\" . # Prof Assoc Vis
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code         
        } UNION {
            ?j hr:job_Jobcode \"10734\" . # Prof Assoc Vis
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        } UNION {
            ?j hr:job_Jobcode \"10726\" . # Andrew D. White Prof-At-Large
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:departmentHRcode ?code         
        } UNION {
            ?j hr:job_Jobcode \"10726\" . # Andrew D. White Prof-At-Large
            ?p hrb:hasJob ?j .
            ?j hr:job_Deptid ?code .        
            ?dept vivo:activityHRcode ?code           
        }

		
		}
    " .


hrw:facultyAdminMemberInConstructQuery 
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>
		PREFIX hr: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#>
		PREFIX hrb: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#>
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

		CONSTRUCT  {
			 ?p vivo:employeeOfAsAdminFacultyMember ?dept .
             ?dept vivo:hasEmployeeAdminFacultyMember ?p .
	     	 ?p rdf:type mann:CornellFaculty
		}		
		WHERE { 
		    {
				?j hr:job_JobFamilyLdesc \"Academic Administrative\" .
				?p hrb:hasJob ?j .
				?j hr:job_Deptid ?code . 
				?dept vivo:departmentHRcode ?code .
			} UNION {
				?j hr:job_JobFamilyLdesc \"Academic Administrative\" .
				?p hrb:hasJob ?j .
				?j hr:job_Deptid ?code . 
				?dept vivo:activityHRcode ?code .
			}
			
        } 

	" .

hrw:academicStaffInConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
	    PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
	    PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>
	    PREFIX hr: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#>
	    PREFIX hrb: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#>
	    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

	    CONSTRUCT  { ?p vivo:employeeOfAsAcademicStaffMember ?dept .
			 ?dept vivo:hasEmployeeAcademicStaffMember ?p .
	     }
	    WHERE {
		{
            ?dept vivo:departmentHRcode ?code .
		    ?j hr:job_JobFamilyLdesc \"Academic Other\" .
		    ?j hr:job_Jobcode ?jobcode .
		    ?p hrb:hasJob ?j .
		    ?j hr:job_Deptid ?code .
		} UNION {
            ?dept vivo:departmentHRcode ?code .
		    ?p hrb:hasJob ?j .
		    ?j hr:job_Deptid ?code .
		    ?j hr:job_JobFamilyLdesc \"Research/Extension\" .
		    ?j hr:job_Jobcode ?jobcode . 
		} UNION {
            ?dept vivo:departmentHRcode ?code .
		    ?p hrb:hasJob ?j .
       		?j hr:job_Deptid ?code .
		    ?j hr:job_JobFamilyLdesc \"Teaching\" .
		    ?j hr:job_Jobcode ?jobcode .
		} UNION {
		    ?j hr:job_JobFamilyLdesc \"Academic Other\" .
		    ?p hrb:hasJob ?j .
		    ?j hr:job_Deptid ?code .
            ?dept vivo:activityHRcode ?code .
            ?j hr:job_Jobcode ?jobcode .
		} UNION {
		    ?p hrb:hasJob ?j .
		    ?j hr:job_Deptid ?code .
		    ?j hr:job_JobFamilyLdesc \"Research/Extension\" .
            ?dept vivo:activityHRcode ?code . 
            ?j hr:job_Jobcode ?jobcode . 
		} UNION {
		    ?p hrb:hasJob ?j .
       		?j hr:job_Deptid ?code .
		    ?j hr:job_JobFamilyLdesc \"Teaching\" .
            ?dept vivo:activityHRcode ?code .
            ?j hr:job_Jobcode ?jobcode .
		}
		FILTER (?jobcode != \"11100\")
		FILTER (?jobcode != \"11099\")
		FILTER (?jobcode != \"10737\")
		FILTER (?jobcode != \"10732\")
		FILTER (?jobcode != \"10731\")
		FILTER (?jobcode != \"10730\")
		FILTER (?jobcode != \"10741\")
		FILTER (?jobcode != \"10736\")
		FILTER (?jobcode != \"10734\")
		FILTER (?jobcode != \"10726\")
	  }
	" . 

hrw:librarianInConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>
PREFIX hr: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#>
PREFIX hrb: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

CONSTRUCT  { ?p mann:employeeOfAsLibrarian ?dept .
             ?dept mann:hasEmployeeLibrarian ?p .
	     ?p rdf:type mann:CornellLibrarian  		
}
WHERE { 
	{
	    ?j hr:job_JobFamilyLdesc \"Library - Academic\" .
	    ?p hrb:hasJob ?j .
		?j hr:job_Deptid ?code .
		?dept vivo:departmentHRcode ?code .
	} UNION {
	    ?j hr:job_JobFamilyLdesc \"Library - Academic\" .
	    ?p hrb:hasJob ?j .
		?j hr:job_Deptid ?code .
		?dept vivo:activityHRcode ?code .
	} 
}
	" .

hrw:nonAcademicStaffInConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
	    PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
	    PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>
	    PREFIX hr: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#>
	    PREFIX hrb: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#>
	    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

	    CONSTRUCT  { ?p vivo:employeeOfAsNonAcademicStaffMember ?dept . 
			 ?dept vivo:hasEmployeeNonAcademicStaffMember ?p 
		       }
	    WHERE { 
		    {
			    ?j hr:job_JobFamilyLdesc \"Academic Support\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Administration\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Alumni Affairs Development\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Athletics\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Communications\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
		    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Computers & Networks\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Fin/Budget/Planning\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Health\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Human Resources\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Library/Museum\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Miscellaneous Non CRS\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
		    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Service/Facilities\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
		    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Student Services\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:departmentHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Academic Support\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Administration\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Alumni Affairs Development\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Athletics\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Communications\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
		    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Computers & Networks\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Fin/Budget/Planning\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Health\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Human Resources\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Library/Museum\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Miscellaneous Non CRS\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
		    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Service/Facilities\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
		    }
		    UNION {
			    ?j hr:job_JobFamilyLdesc \"Student Services\" .
	    		    ?p hrb:hasJob ?j .
			    ?j hr:job_Deptid ?code . 
			    ?dept vivo:activityHRcode ?code
	    	    }	    

	    } 

	" .

hrw:CampusPhoneConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
            CONSTRUCT {
	    	      ?p <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#CampusPhone> ?o
	    } WHERE {
	      	      ?p <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#person_CampusPhone> ?o
            }
	" .

hrw:primaryUnitCodeConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		   CONSTRUCT {
		   	     ?p <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#primaryUnitCode> ?code
		   } WHERE {
			     ?job <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#job_HeadcountIndicator> \"P\" .
		     	     ?p <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#hasJob> ?job .
			     ?job <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#job_Unitid> ?code
		   }
	" .

hrw:FacultyTypeConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
	PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
	PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>
	PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

	CONSTRUCT {
    	?person rdf:type mann:CornellFaculty
	} WHERE {
    	?person vivo:employeeOfAsAcademicFacultyMember ?something
	}
	" .

hrw:AcademicStaffTypeConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

		CONSTRUCT {
    		?person rdf:type vivo:CornellAcademicStaff
		} WHERE {
    		?person vivo:employeeOfAsAcademicStaffMember ?something
    	OPTIONAL { 
        	?person vivo:employeeOfAsAcademicFacultyMember ?somethingElse
    	} 
    	FILTER (!bound(?somethingElse))
	}
    " .

hrw:LibrarianTypeConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

CONSTRUCT {
    ?person rdf:type mann:CornellLibrarian
} WHERE {
    ?person mann:employeeOfAsLibrarian ?something
}
	" .
hrw:NonAcademicStaffTypeConstructQuery 
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>

		CONSTRUCT {
    		?person rdf:type mann:CornellNonAcademicStaff
		} WHERE {
    		?person vivo:employeeOfAsNonAcademicStaffMember  ?something
    	OPTIONAL { 
        	?person vivo:employeeOfAsAcademicFacultyMember ?facultyOrg
    	}	 
    	OPTIONAL {
        	?person vivo:employeeOfAsAcademicStaffMember ?academicStaffOrg
    	}
    	OPTIONAL {
        	?person vivo:employeeOfAsLibrarian ?librarianOrg
    	}
    	FILTER (!bound(?facultyOrg))
    	FILTER (!bound(?academicStaffOrg))
    	FILTER (!bound(?librarianOrg))
	}

	" .

hrw:MonikerConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX hr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>
		CONSTRUCT {	
    		?p vitro:moniker ?workingTitle
		} WHERE {
    		?p hr:WorkingTitle ?workingTitle
		}

    " .

hrw:PeoplePropsConstructQuery 
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
PREFIX mann: <http://vivo.cornell.edu/ns/mannadditions/0.1#>

PREFIX hr: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/1#>
PREFIX hrb: <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#>
PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>
PREFIX fn: <http://www.w3.org/2005/xpath-functions#>

CONSTRUCT  { 
	?ap chr:emplId ?emplId .
	?ap chr:netId ?netId .
	?ap chr:LastName ?lastName .
	?ap chr:NamePrefix ?namePrefix .
	?ap chr:FirstName ?firstName .
	?ap chr:NamePrefix ?namePrefix .
	?ap chr:NameSuffix ?nameSuffix .
	?ap chr:PrefName ?prefName .
	?ap chr:WorkingTitle ?workingTitle .
	?ap chr:Address1 ?address .
	?ap chr:Name ?name .
	?ap chr:EndowCharCodeDesc ?endowChair .
	?ap chr:primaryJobcodeLdesc ?primaryJobcodeLdesc .
	?ap chr:Unitid ?unitId
}
WHERE {
	?ap hrb:hasPerson ?p .
    OPTIONAL {
		?p hr:person_Emplid ?emplId 		
	} 
	OPTIONAL {
		?p hr:person_Netid ?rawNetId .
		LET (?netId := fn:lower-case(?rawNetId)) 
	}
	OPTIONAL {
		?p hr:person_LastName ?lastName
	}
	OPTIONAL {
		?p hr:person_FirstName ?firstName
	}
	OPTIONAL {
		?p hr:person_NamePrefix ?namePrefix
	}
	OPTIONAL {
		?p hr:person_NameSuffix ?nameSuffix
	}
	OPTIONAL {
		?p hr:person_PrefName ?prefName
	}
	OPTIONAL {
		?p hr:person_WorkingTitle ?workingTitle
	}
	OPTIONAL {
		?p hr:person_Address1 ?address
	}
	OPTIONAL {
		?p hr:person_Name ?name
	}
	OPTIONAL {
		?ap hrb:hasDegree ?degree .
		?degree hr:degree_EndowChairCodeDesc ?endowChair .
	}
	OPTIONAL {
		?ap hrb:hasJob ?job .
		?job hr:job_HeadcountIndicator \"P\" .
		?job hr:job_JobcodeLdesc ?primaryJobcodeLdesc 
	}
	OPTIONAL {
		?ap hrb:hasJob ?job .
		?job hr:job_Unitid ?unitId
	}
} 

	" .

hrw:LabelConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX hr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>
		PREFIX rdfs: <http://www.w3.org/2000/01/rdf-schema#>

	CONSTRUCT {
    	?p rdfs:label ?label
	} WHERE {
    	?p hr:PrefName ?label
	}
	" .

hrw:AAPCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueAAPThing
		} WHERE {
    		?person chr:Unitid \"AR\".
		}
	" .

hrw:ASCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueASThing
		} WHERE {
    		?person chr:Unitid \"AS\".
		}
	" .

hrw:CALSCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueCALSThing
		} WHERE {
    		?person chr:Unitid \"AG\".
		}
	" .

hrw:EngineeringCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueEngineeringThing
		} WHERE {
    		?person chr:Unitid \"EN\".
		}
	" .

hrw:HotelCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueHotelThing
		} WHERE {
    		?person chr:Unitid \"HA\".
		}
	" .

hrw:HumanEcologyCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueHumanEcologyThing
		} WHERE {
    		?person chr:Unitid \"HE\".
		}
	" .

hrw:ILRCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueILRThing
		} WHERE {
    		?person chr:Unitid \"IL\".
		}
	" .

hrw:JohnsonCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueJohnsonThing
		} WHERE {
    		?person chr:Unitid \"GM\".
		}
	" .

hrw:LawCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueLawThing
		} WHERE {
    		?person chr:Unitid \"LA\".
		}
	" .

hrw:VetCollegeFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
		PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
		PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
		PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
		PREFIX chr: <http://vivo.cornell.edu/ns/hr/0.9/hr.owl#>

		CONSTRUCT {
    		?person rdf:type vitro:Flag2ValueVetThing
		} WHERE {
    		?person chr:Unitid \"VM\".
		}
	" .



hrw:CALSPortalFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
	    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
	    PREFIX akt: <http://www.aktors.org/ontology/portal#>
	    PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
	    PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
	    PREFIX afn: <http://jena.hpl.hp.com/ARQ/function#>

	    CONSTRUCT {
		?person rdf:type ?flag
	    } WHERE {
	       ?person rdf:type vitro:Flag2ValueCALSThing . 
	       ?org rdf:type vivo:OrganizedEndeavor .
	    	?person ?rel ?org .
		?org rdf:type ?acceptableType .
		?org rdf:type ?flag
		FILTER (regex(str(?acceptableType),\"Academic\"))
		FILTER (regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value1\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value7\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value8\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value9\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value6\"))
	    } " .

hrw:OtherPortalFlagConstructQuery
	a s:SPARQLCONSTRUCTQuery ;
	s:queryStr "
	    PREFIX rdf: <http://www.w3.org/1999/02/22-rdf-syntax-ns#>
	    PREFIX akt: <http://www.aktors.org/ontology/portal#>
	    PREFIX vitro: <http://vitro.mannlib.cornell.edu/ns/vitro/0.7#>
	    PREFIX vivo: <http://vivo.library.cornell.edu/ns/0.1#>
	    PREFIX afn: <http://jena.hpl.hp.com/ARQ/function#>

	    CONSTRUCT {
		?person rdf:type ?flag
	    } WHERE {
		?person rdf:type <http://vitro.mannlib.cornell.edu/ns/bjl23/hr/rules1#Person> .
		?org rdf:type vivo:OrganizedEndeavor .
	    	?person ?rel ?org .    
		?org rdf:type ?acceptableType .
		?org rdf:type ?flag
		FILTER (regex(str(?acceptableType),\"Academic\"))
		FILTER (regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value2\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value3\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value4\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value5\"))
		FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value6\"))
  	    	FILTER (!regex(str(?flag),\"http://vitro.mannlib.cornell.edu/ns/vitro/0.7#Flag1Value7\"))
	    } " .


hrw:RawDataModel
	a w:Model ;
	w:modelName "raw data" .

hrw:WorkModel
	a w:Model ;
	w:modelName "hr work model" .

hrw:JenaOntModel 
	a w:Model ;
	w:modelName "vitro:jenaOntModel" .

hrw:NewOrgsModel 
	a w:Model ;
	w:modelName "new organizations" .

hrw:MarkerModel
	a w:Model ;
	w:modelName "markers" .

hrw:NewPeopleAssertionsModel
	a w:Model ;
	w:modelName "new people assertions" .

hrw:ExistingPeoplePreRetractionsModel
	a w:Model ;
	w:modelName "existing people pre-retractions model" .

hrw:ExistingPeoplePreAssertionsModel
	a w:Model ;
	w:modelName "existing people pre-assertions model" .

hrw:ExistingPeopleRetractionsModel
	a w:Model ;
	w:modelName "existing people retractions" .

hrw:ExistingPeopleAssertionsModel
	a w:Model ;
	w:modelName "existing people assertions" .

hrw:HrIngestWorkflow
	a w:Workflow ;
	rdfs:label "HR Ingest Workflow"@en-US ;
	w:firstStep hrw:ClearWorkModel .

hrw:ClearWorkModel
	a w:WorkflowStep ;
	w:action [
		 a w:ClearModelAction ;
		 w:sourceModel hrw:WorkModel
	] ;
	w:nextStep hrw:CopyRawDataToWorkModel .

hrw:CopyRawDataToWorkModel
	a w:WorkflowStep ;
	w:action [
		a w:AddModelAction ;
		w:sourceModel hrw:WorkModel ;
		w:modelToAdd hrw:RawDataModel ;
		w:destinationModel hrw:WorkModel 
	] ;
	w:nextStep hrw:CornellemailnetIdConstruct .

hrw:CornellemailnetIdConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:RawDataModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:CornellemailnetIdConstructQuery 
	] ;
	w:nextStep hrw:processCornellemailnetId .

hrw:processCornellemailnetId
	a w:WorkflowStep ;
	w:action [
		 a w:ProcessPropertyValueStringsAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:originalProperty [ a w:Literal ; w:literalValue "http://vivo.library.cornell.edu/ns/0.1#CornellemailnetId" ] ;
		 w:newProperty [ a w:Literal ; w:literalValue "http://vivo.library.cornell.edu/ns/0.1#CornellemailnetId" ] ;
		 w:processorClass [ a w:Literal ; w:literalValue "edu.cornell.mannlib.vitro.bjl23.ingest.hr.HRCornellEmailProcessor" ] ;
		 w:processorMethod [ a w:Literal ; w:literalValue "process" ]
	] ;
	w:nextStep hrw:facultyAdminAppointmentConstruct .


hrw:facultyAdminAppointmentConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:facultyAdminMemberInConstructQuery
	] ;
	w:nextStep hrw:facultyMemberInConstruct .

hrw:facultyMemberInConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:facultyMemberInConstructQuery
	] ;
	w:nextStep hrw:academicStaffInConstruct .

hrw:academicStaffInConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:academicStaffInConstructQuery
	] ;
	w:nextStep hrw:librarianInConstruct .

hrw:librarianInConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:librarianInConstructQuery
	] ;
	w:nextStep hrw:nonAcademicStaffInConstruct .

hrw:nonAcademicStaffInConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:nonAcademicStaffInConstructQuery
	] ;
	w:nextStep hrw:PeoplePropsConstruct .

hrw:PeoplePropsConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:PeoplePropsConstructQuery
	] ;
	w:nextStep hrw:primaryUnitCodeConstruct .

hrw:primaryUnitCodeConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:primaryUnitCodeConstructQuery 
	] ;
	w:nextStep hrw:ProcessName .

hrw:ProcessName
	a w:WorkflowStep ;
	w:action [
		 a w:ProcessPropertyValueStringsAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:originalProperty [ a w:Literal ; w:literalValue "http://vivo.cornell.edu/ns/hr/0.9/hr.owl#Name" ] ;
		 w:newProperty [ a w:Literal ; w:literalValue "http://vivo.cornell.edu/ns/hr/0.9/hr.owl#Name" ] ;
		 w:processorClass [ a w:Literal ; w:literalValue "edu.cornell.mannlib.vitro.bjl23.ingest.hr.HRNameProcessor" ] ;
		 w:processorMethod [ a w:Literal ; w:literalValue "process" ]
	] ;
	w:nextStep hrw:ProcessPrefName .

hrw:ProcessPrefName
	a w:WorkflowStep ;
	w:action [
		 a w:ProcessPropertyValueStringsAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:originalProperty [ a w:Literal ; w:literalValue "http://vivo.cornell.edu/ns/hr/0.9/hr.owl#PrefName" ] ;
		 w:newProperty [ a w:Literal ; w:literalValue "http://vivo.cornell.edu/ns/hr/0.9/hr.owl#PrefName" ] ;
		 w:processorClass [ a w:Literal ; w:literalValue "edu.cornell.mannlib.vitro.bjl23.ingest.hr.HRNameProcessor" ] ;
		 w:processorMethod [ a w:Literal ; w:literalValue "process" ]
	] ;
	w:nextStep hrw:labelConstruct .

hrw:labelConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:LabelConstructQuery
	] ;
	w:nextStep hrw:monikerConstruct2 .

hrw:monikerConstruct2
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:MonikerConstructQuery
	] ;
	w:nextStep hrw:TypeFacultyConstruct .
	
hrw:TypeFacultyConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:FacultyTypeConstructQuery
	] ;
	w:nextStep hrw:TypeAcademicStaffConstruct .

hrw:TypeAcademicStaffConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:AcademicStaffTypeConstructQuery
	] ;
	w:nextStep hrw:TypeLibrarianConstruct .

hrw:TypeLibrarianConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:LibrarianTypeConstructQuery
	] ;
	w:nextStep hrw:TypeNonAcademicStaffConstruct .

hrw:TypeNonAcademicStaffConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:NonAcademicStaffTypeConstructQuery
	] ;
	w:nextStep hrw:AAPCollegeFlagConstruct .

hrw:AAPCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:AAPCollegeFlagConstructQuery
	] ;
	w:nextStep hrw:ASCollegeFlagConstruct .

hrw:ASCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:ASCollegeFlagConstructQuery 
	] ;
	w:nextStep hrw:CALSCollegeFlagConstruct .

hrw:CALSCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:CALSCollegeFlagConstructQuery
	] ;
	w:nextStep hrw:EngineeringCollegeFlagConstruct .

hrw:EngineeringCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:EngineeringCollegeFlagConstructQuery
	] ;
	w:nextStep hrw:HotelCollegeFlagConstruct .

hrw:HotelCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:HotelCollegeFlagConstructQuery
	] ;
	w:nextStep hrw:HumanEcologyCollegeFlagConstruct .

hrw:HumanEcologyCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:HumanEcologyCollegeFlagConstructQuery
	] ;
	w:nextStep hrw:ILRCollegeFlagConstruct .

hrw:ILRCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:ILRCollegeFlagConstructQuery
	] ;
	w:nextStep hrw:JohnsonCollegeFlagConstruct .

hrw:JohnsonCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:JohnsonCollegeFlagConstructQuery
	] ;
	w:nextStep hrw:LawCollegeFlagConstruct .

hrw:LawCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:LawCollegeFlagConstructQuery
	] ;
	w:nextStep hrw:VetCollegeFlagConstruct .

hrw:VetCollegeFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:VetCollegeFlagConstructQuery
	] ;
	w:nextStep hrw:CALSPortalFlagConstruct .

hrw:CALSPortalFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:CALSPortalFlagConstructQuery
	] ;
	w:nextStep hrw:OtherPortalFlagConstruct .

hrw:OtherPortalFlagConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:OtherPortalFlagConstructQuery 
	] ;
	w:nextStep hrw:sameAsConstruct .

hrw:sameAsConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:WorkModel ;
		 w:sparqlQuery hrw:sameAsConstructQuery 
	] ;
	w:nextStep hrw:ClearNewPeopleAssertionsModel .

hrw:ClearNewPeopleAssertionsModel
	a w:WorkflowStep ;
	w:action [
		 a w:ClearModelAction ;
		 w:sourceModel hrw:NewPeopleAssertionsModel
	] ;
	w:nextStep hrw:NewPeopleAssertionsConstruct .
	
hrw:NewPeopleAssertionsConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:NewPeopleAssertionsModel ;
		 w:sparqlQuery hrw:NewPeopleAssertionsConstructQuery
	] ; 
	w:nextStep hrw:ClearExistingPeoplePreAssertionsModel .

hrw:ClearExistingPeoplePreAssertionsModel
	a w:WorkflowStep ;
	w:action [
		 a w:ClearModelAction ;
		 w:sourceModel hrw:ExistingPeoplePreAssertionsModel
	] ;
	w:nextStep hrw:ExistingPeoplePreAssertionsConstruct .

hrw:ExistingPeoplePreAssertionsConstruct
	a w:WorkflowStep ;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:destinationModel hrw:ExistingPeoplePreAssertionsModel ;
		 w:sparqlQuery hrw:ExistingPeoplePreAssertionsConstructQuery
	] ;
	w:nextStep hrw:ClearExistingPeoplePreRetractionsModel .

hrw:ClearExistingPeoplePreRetractionsModel
	a w:WorkflowStep ;
	w:action [
		 a w:ClearModelAction ;
		 w:sourceModel hrw:ExistingPeoplePreRetractionsModel
	] ;
	w:nextStep hrw:ExistingPeoplePreRetractionsConstruct1 .

hrw:ExistingPeoplePreRetractionsConstruct1
	a w:WorkflowStep;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:ExistingPeoplePreRetractionsModel ;
		 w:sparqlQuery hrw:ExistingPeoplePreRetractionsConstruct1Query 
	] ; 
	w:nextStep hrw:ExistingPeoplePreRetractionsConstruct2 .

hrw:ExistingPeoplePreRetractionsConstruct2
	a w:WorkflowStep;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:ExistingPeoplePreRetractionsModel ;
		 w:sparqlQuery hrw:ExistingPeoplePreRetractionsConstruct2Query 
	] ; 
	w:nextStep hrw:ExistingPeoplePreRetractionsConstruct3 .

hrw:ExistingPeoplePreRetractionsConstruct3
	a w:WorkflowStep;
	w:action [
		 a w:SPARQLCONSTRUCTAction ;
		 w:sourceModel hrw:WorkModel ;
		 w:sourceModel hrw:JenaOntModel ;
		 w:destinationModel hrw:ExistingPeoplePreRetractionsModel ;
		 w:sparqlQuery hrw:ExistingPeoplePreRetractionsConstruct3Query 
	] ; 
	w:nextStep hrw:ClearExistingPeopleRetractionsModel .

hrw:ClearExistingPeopleRetractionsModel
	a w:WorkflowStep ;
	w:action [
		 a w:ClearModelAction ;
		 w:sourceModel hrw:ExistingPeopleRetractionsModel 
	] ;
	w:nextStep hrw:ClearExistingPeopleAssertionsModel .

hrw:ClearExistingPeopleAssertionsModel
	a w:WorkflowStep ;
	w:action [
		 a w:ClearModelAction ;
		 w:sourceModel hrw:ExistingPeopleAssertionsModel
	] ;
	w:nextStep hrw:MakeExistingPeopleRetractions .

hrw:MakeExistingPeopleRetractions
	a w:WorkflowStep ;
	w:action [
		 a w:SubtractModelAction ;
		 w:sourceModel hrw:ExistingPeoplePreRetractionsModel ;
		 w:modelToSubtract hrw:ExistingPeoplePreAssertionsModel ;
		 w:destinationModel hrw:ExistingPeopleRetractionsModel 
	] ;
	w:nextStep hrw:MakeExistingPeopleAssertions .

hrw:MakeExistingPeopleAssertions
	a w:WorkflowStep ;
	w:action [
		 a w:SubtractModelAction ;
		 w:sourceModel hrw:ExistingPeoplePreAssertionsModel ;
		 w:modelToSubtract hrw:ExistingPeoplePreRetractionsModel ;
		 w:destinationModel hrw:ExistingPeopleAssertionsModel
	] .

	
